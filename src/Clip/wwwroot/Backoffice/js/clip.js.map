{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Clip/Backoffice/js/clip.ts","src/Clip/Backoffice/js/components/_module.ts","src/Clip/Backoffice/js/components/overview.controller.ts","src/Clip/Backoffice/js/services/_module.ts","src/Clip/Backoffice/js/services/service.ts"],"names":[],"mappings":"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","file":"clip.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { ComponentsModule } from './components/_module';\r\nimport { ServicesModule } from './services/_module';\r\n\r\nconst name = 'clip';\r\n\r\nangular.module(name, [\r\n    ServicesModule,\r\n    ComponentsModule,\r\n]);\r\n\r\nangular.module('umbraco').requires.push(name);\r\n","import { OverviewController } from './overview.controller';\r\n\r\nexport const ComponentsModule = angular\r\n    .module('clip.components', [])\r\n    .controller(OverviewController.controllerName, OverviewController)\r\n    .name;","export class OverviewController {\r\n\r\n    public static controllerName = 'Clip.Overview.Controller';\r\n\r\n    config!: IClipConfigModel;\r\n    groups: Array<UmbUserGroup> = [];\r\n    allContentTypes: Array<UmbContentType> = [];\r\n\r\n    name!: string;\r\n\r\n    contentTypeSyncModel: { [key: string]: Array<UmbContentType> } = {};\r\n\r\n    private _filterCssClass = 'not-allowed not-published';\r\n\r\n    constructor(\r\n        private $q,\r\n        private clipService: IClipService,\r\n        private editorService,\r\n        private localizationService,\r\n        private contentTypeResource,\r\n        private userGroupsResource) {\r\n    }\r\n\r\n    private _getContentTypeIcon(type) {\r\n        type.icon = this.allContentTypes.find(t => t.key === type.key)?.icon;\r\n    }\r\n\r\n    $onInit = async () => {\r\n        const promises = [\r\n            this.contentTypeResource.getAll(),\r\n            this.clipService.get(),\r\n            this.userGroupsResource.getUserGroups({ onlyCurrentUserGroups: false }),\r\n            this.localizationService.localize('treeHeaders_contentCreationRules'),\r\n        ];\r\n\r\n        [this.allContentTypes, this.config, this.groups, this.name] = await this.$q.all(promises);\r\n\r\n        this.config.groups.forEach(c => {\r\n            if (!c.groupId) return;\r\n\r\n            const group = this.groups.find(g => g.id == c.groupId);\r\n            if (!group) return;\r\n\r\n            c.icon = group?.icon;\r\n            c.groupName = group?.name;\r\n\r\n            let contentTypeSyncModel: Array<UmbContentType> = [];\r\n\r\n            c.contentTypeKeys.forEach(key => {\r\n                const contentType = this.allContentTypes.find(x => x.key === key);\r\n                if (!contentType) return;\r\n\r\n                contentTypeSyncModel.push(contentType);\r\n            });\r\n\r\n            this.contentTypeSyncModel[c.groupId] = contentTypeSyncModel;\r\n        });\r\n\r\n        this.config.contentTypeCounts.forEach(c => {\r\n            const type = this.allContentTypes.find(t => t.key === c.key);\r\n            if (!type) return;\r\n\r\n            c.icon = type.icon;\r\n            c.name = type.name;\r\n        });\r\n    }\r\n\r\n    removeGroup = index => {\r\n        const g = this.config.groups[index];\r\n        delete this.contentTypeResource[g.groupId];\r\n        this.config.groups.splice(index, 1);\r\n    }\r\n\r\n    addGroup = () => {\r\n        const groupPickerOptions = {\r\n            submit: model => {\r\n                model.selection.forEach(s => {\r\n                    const idx = this.config.groups.findIndex(x => x.groupId == s.id);\r\n                    if (idx !== -1) return;\r\n\r\n                    this.config.groups.push({\r\n                        icon: s.icon,\r\n                        groupId: s.id,\r\n                        groupName: s.name,\r\n                        contentTypeKeys: [],\r\n                    });\r\n                });\r\n\r\n                this.editorService.close();\r\n            },\r\n            close: () => this.editorService.close()\r\n        };\r\n\r\n        this.editorService.userGroupPicker(groupPickerOptions);\r\n    }\r\n\r\n    addContentType(groupId) {\r\n        const typePickerOptions = {\r\n            multiPicker: false,\r\n            filterCssClass: this._filterCssClass,\r\n            filter: item => (this.contentTypeSyncModel[groupId] || [])\r\n                .some(x => x.id == item.id), // coerce string to int                \r\n            submit: model => {\r\n                const valueArray = this.contentTypeSyncModel[groupId] || [];\r\n                const value = model.selection[0];\r\n\r\n                this._getContentTypeIcon(value);\r\n                valueArray.push(value);\r\n\r\n                this.contentTypeSyncModel[groupId] = valueArray;\r\n                this.editorService.close();\r\n            },\r\n            close: () => this.editorService.close()\r\n        };\r\n\r\n        this.editorService.contentTypePicker(typePickerOptions);\r\n    }\r\n\r\n    removeContentType(type, groupId) {\r\n        const idx = this.contentTypeSyncModel[groupId].findIndex(x => x.key === type.key);\r\n        this.contentTypeSyncModel[groupId].splice(idx, 1);\r\n    }\r\n\r\n    addContentTypeLimit() {\r\n        const typePickerOptions = {\r\n            multiPicker: false,\r\n            filterCssClass: this._filterCssClass,\r\n            filter: item => this.config.contentTypeCounts.some(x => x.id == item.id), // coerce string to int                \r\n            submit: model => {\r\n                const value: IClipContentTypeCountModel = model.selection[0];\r\n                value.count = this.config.existingItemCounts ? this.config.existingItemCounts[value.key] : '';\r\n                this._getContentTypeIcon(value);\r\n\r\n                this.config.contentTypeCounts.push(value);\r\n                this.editorService.close();\r\n            },\r\n            close: () => this.editorService.close()\r\n        };\r\n\r\n        this.editorService.contentTypePicker(typePickerOptions);\r\n    }\r\n\r\n    removeContentTypeCount(type) {\r\n        const idx = this.config.contentTypeCounts.findIndex(x => x.id === type.id);\r\n        this.config.contentTypeCounts.splice(idx, 1);\r\n    }\r\n\r\n    async save() {\r\n        let config: IClipConfigModel = {\r\n            groups: [],\r\n            contentTypeCounts: this.config.contentTypeCounts,\r\n        };\r\n\r\n        Object.keys(this.contentTypeSyncModel).forEach(k => {\r\n            config.groups.push({\r\n                groupId: +k,\r\n                contentTypeKeys: this.contentTypeSyncModel[+k].map(x => x.key)\r\n            });\r\n        });\r\n\r\n        await this.clipService.save(config);            \r\n    }\r\n}\r\n","import { ClipService } from './service';\r\n\r\nexport const ServicesModule = angular\r\n    .module('clip.services', [])\r\n    .factory(ClipService.serviceName, ClipService)\r\n    .name;","export class ClipService implements IClipService {\r\n\r\n    public static serviceName = 'clipService';\r\n\r\n    constructor(private $http, private umbRequestHelper) {\r\n    }\r\n\r\n    private _request = (method: 'POST' | 'GET', url: string, data?: object) => {\r\n        url = `${Umbraco.Sys.ServerVariables.Clip.configurationApiBaseUrl}${url}`;\r\n\r\n        return this.umbRequestHelper.resourcePromise(\r\n            method === 'POST' ? this.$http.post(url, data)\r\n                : this.$http.get(url),\r\n            'Something broke'\r\n        );\r\n    }\r\n\r\n    save = (config: IClipConfigModel) => this._request('POST', 'Save', config);\r\n\r\n    get = () => this._request('GET', 'Get');\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQ2xpcC9CYWNrb2ZmaWNlL2pzL2NsaXAudHMiLCJzcmMvQ2xpcC9CYWNrb2ZmaWNlL2pzL2NvbXBvbmVudHMvX21vZHVsZS50cyIsInNyYy9DbGlwL0JhY2tvZmZpY2UvanMvY29tcG9uZW50cy9vdmVydmlldy5jb250cm9sbGVyLnRzIiwic3JjL0NsaXAvQmFja29mZmljZS9qcy9zZXJ2aWNlcy9fbW9kdWxlLnRzIiwic3JjL0NsaXAvQmFja29mZmljZS9qcy9zZXJ2aWNlcy9zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxrREFBd0Q7QUFDeEQsZ0RBQW9EO0FBRXBELE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQztBQUVwQixPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtJQUNqQix3QkFBYztJQUNkLDBCQUFnQjtDQUNuQixDQUFDLENBQUM7QUFFSCxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7O0FDVjlDLCtEQUEyRDtBQUU5QyxRQUFBLGdCQUFnQixHQUFHLE9BQU87S0FDbEMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLEVBQUUsQ0FBQztLQUM3QixVQUFVLENBQUMsd0NBQWtCLENBQUMsY0FBYyxFQUFFLHdDQUFrQixDQUFDO0tBQ2pFLElBQUksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUNMVixNQUFhLGtCQUFrQjtJQWMzQixZQUNZLEVBQUUsRUFDRixXQUF5QixFQUN6QixhQUFhLEVBQ2IsbUJBQW1CLEVBQ25CLG1CQUFtQixFQUNuQixrQkFBa0I7UUFMbEIsT0FBRSxHQUFGLEVBQUUsQ0FBQTtRQUNGLGdCQUFXLEdBQVgsV0FBVyxDQUFjO1FBQ3pCLGtCQUFhLEdBQWIsYUFBYSxDQUFBO1FBQ2Isd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFBO1FBQ25C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QUFXLENBQUMsV0FBVyxFQUFFLHFCQUFXLENBQUM7S0FDN0MsSUFBSSxDQUFDOzs7OztBQ0xWLE1BQWEsV0FBVztJQUlwQixZQUFvQixLQUFLLEVBQVUsZ0JBQWdCO1FBQS9CLFVBQUssR0FBTCxLQUFLLENBQUE7UUFBVSxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQUE7UUFHM0MsYUFBUSxHQUFHLENBQUMsTUFBc0IsRUFBRSxHQUFXLEVBQUUsSUFBYSxFQUFFLEVBQUU7WUFDdEUsR0FBRyxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLHVCQUF1QixHQUFHLEdBQUcsRUFBRSxDQUFDO1lBRTFFLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FDeEMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQztnQkFDMUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUN6QixpQkFBaUIsQ0FDcEIsQ0FBQztRQUNOLENBQUMsQ0FBQTtRQUVELFNBQUksR0FBRyxDQUFDLE1BQXdCLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUUzRSxRQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFkeEMsQ0FBQzs7QUFMTCxrQ0FvQkM7QUFsQmlCLHVCQUFXLEdBQUcsYUFBYSxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHsgQ29tcG9uZW50c01vZHVsZSB9IGZyb20gJy4vY29tcG9uZW50cy9fbW9kdWxlJztcclxuaW1wb3J0IHsgU2VydmljZXNNb2R1bGUgfSBmcm9tICcuL3NlcnZpY2VzL19tb2R1bGUnO1xyXG5cclxuY29uc3QgbmFtZSA9ICdjbGlwJztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKG5hbWUsIFtcclxuICAgIFNlcnZpY2VzTW9kdWxlLFxyXG4gICAgQ29tcG9uZW50c01vZHVsZSxcclxuXSk7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgndW1icmFjbycpLnJlcXVpcmVzLnB1c2gobmFtZSk7XHJcbiIsImltcG9ydCB7IE92ZXJ2aWV3Q29udHJvbGxlciB9IGZyb20gJy4vb3ZlcnZpZXcuY29udHJvbGxlcic7XHJcblxyXG5leHBvcnQgY29uc3QgQ29tcG9uZW50c01vZHVsZSA9IGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2NsaXAuY29tcG9uZW50cycsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoT3ZlcnZpZXdDb250cm9sbGVyLmNvbnRyb2xsZXJOYW1lLCBPdmVydmlld0NvbnRyb2xsZXIpXHJcbiAgICAubmFtZTsiLCJleHBvcnQgY2xhc3MgT3ZlcnZpZXdDb250cm9sbGVyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbnRyb2xsZXJOYW1lID0gJ0NsaXAuT3ZlcnZpZXcuQ29udHJvbGxlcic7XHJcblxyXG4gICAgY29uZmlnITogSUNsaXBDb25maWdNb2RlbDtcclxuICAgIGdyb3VwczogQXJyYXk8VW1iVXNlckdyb3VwPiA9IFtdO1xyXG4gICAgYWxsQ29udGVudFR5cGVzOiBBcnJheTxVbWJDb250ZW50VHlwZT4gPSBbXTtcclxuXHJcbiAgICBuYW1lITogc3RyaW5nO1xyXG5cclxuICAgIGNvbnRlbnRUeXBlU3luY01vZGVsOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PFVtYkNvbnRlbnRUeXBlPiB9ID0ge307XHJcblxyXG4gICAgcHJpdmF0ZSBfZmlsdGVyQ3NzQ2xhc3MgPSAnbm90LWFsbG93ZWQgbm90LXB1Ymxpc2hlZCc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSAkcSxcclxuICAgICAgICBwcml2YXRlIGNsaXBTZXJ2aWNlOiBJQ2xpcFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBlZGl0b3JTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgbG9jYWxpemF0aW9uU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGNvbnRlbnRUeXBlUmVzb3VyY2UsXHJcbiAgICAgICAgcHJpdmF0ZSB1c2VyR3JvdXBzUmVzb3VyY2UpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRDb250ZW50VHlwZUljb24odHlwZSkge1xyXG4gICAgICAgIHR5cGUuaWNvbiA9IHRoaXMuYWxsQ29udGVudFR5cGVzLmZpbmQodCA9PiB0LmtleSA9PT0gdHlwZS5rZXkpPy5pY29uO1xyXG4gICAgfVxyXG5cclxuICAgICRvbkluaXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudFR5cGVSZXNvdXJjZS5nZXRBbGwoKSxcclxuICAgICAgICAgICAgdGhpcy5jbGlwU2VydmljZS5nZXQoKSxcclxuICAgICAgICAgICAgdGhpcy51c2VyR3JvdXBzUmVzb3VyY2UuZ2V0VXNlckdyb3Vwcyh7IG9ubHlDdXJyZW50VXNlckdyb3VwczogZmFsc2UgfSksXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5sb2NhbGl6ZSgndHJlZUhlYWRlcnNfY29udGVudENyZWF0aW9uUnVsZXMnKSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBbdGhpcy5hbGxDb250ZW50VHlwZXMsIHRoaXMuY29uZmlnLCB0aGlzLmdyb3VwcywgdGhpcy5uYW1lXSA9IGF3YWl0IHRoaXMuJHEuYWxsKHByb21pc2VzKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb25maWcuZ3JvdXBzLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgIGlmICghYy5ncm91cElkKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuZ3JvdXBzLmZpbmQoZyA9PiBnLmlkID09IGMuZ3JvdXBJZCk7XHJcbiAgICAgICAgICAgIGlmICghZ3JvdXApIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGMuaWNvbiA9IGdyb3VwPy5pY29uO1xyXG4gICAgICAgICAgICBjLmdyb3VwTmFtZSA9IGdyb3VwPy5uYW1lO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbnRlbnRUeXBlU3luY01vZGVsOiBBcnJheTxVbWJDb250ZW50VHlwZT4gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGMuY29udGVudFR5cGVLZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gdGhpcy5hbGxDb250ZW50VHlwZXMuZmluZCh4ID0+IHgua2V5ID09PSBrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50VHlwZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlU3luY01vZGVsLnB1c2goY29udGVudFR5cGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudFR5cGVTeW5jTW9kZWxbYy5ncm91cElkXSA9IGNvbnRlbnRUeXBlU3luY01vZGVsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbmZpZy5jb250ZW50VHlwZUNvdW50cy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5hbGxDb250ZW50VHlwZXMuZmluZCh0ID0+IHQua2V5ID09PSBjLmtleSk7XHJcbiAgICAgICAgICAgIGlmICghdHlwZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgYy5pY29uID0gdHlwZS5pY29uO1xyXG4gICAgICAgICAgICBjLm5hbWUgPSB0eXBlLm5hbWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlR3JvdXAgPSBpbmRleCA9PiB7XHJcbiAgICAgICAgY29uc3QgZyA9IHRoaXMuY29uZmlnLmdyb3Vwc1tpbmRleF07XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuY29udGVudFR5cGVSZXNvdXJjZVtnLmdyb3VwSWRdO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmdyb3Vwcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEdyb3VwID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGdyb3VwUGlja2VyT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgc3VibWl0OiBtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5zZWxlY3Rpb24uZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLmNvbmZpZy5ncm91cHMuZmluZEluZGV4KHggPT4geC5ncm91cElkID09IHMuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggIT09IC0xKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmdyb3Vwcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogcy5pY29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBzLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cE5hbWU6IHMubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVLZXlzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yU2VydmljZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZTogKCkgPT4gdGhpcy5lZGl0b3JTZXJ2aWNlLmNsb3NlKClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmVkaXRvclNlcnZpY2UudXNlckdyb3VwUGlja2VyKGdyb3VwUGlja2VyT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ29udGVudFR5cGUoZ3JvdXBJZCkge1xyXG4gICAgICAgIGNvbnN0IHR5cGVQaWNrZXJPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtdWx0aVBpY2tlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGZpbHRlckNzc0NsYXNzOiB0aGlzLl9maWx0ZXJDc3NDbGFzcyxcclxuICAgICAgICAgICAgZmlsdGVyOiBpdGVtID0+ICh0aGlzLmNvbnRlbnRUeXBlU3luY01vZGVsW2dyb3VwSWRdIHx8IFtdKVxyXG4gICAgICAgICAgICAgICAgLnNvbWUoeCA9PiB4LmlkID09IGl0ZW0uaWQpLCAvLyBjb2VyY2Ugc3RyaW5nIHRvIGludCAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgc3VibWl0OiBtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUFycmF5ID0gdGhpcy5jb250ZW50VHlwZVN5bmNNb2RlbFtncm91cElkXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbW9kZWwuc2VsZWN0aW9uWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2dldENvbnRlbnRUeXBlSWNvbih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZUFycmF5LnB1c2godmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFR5cGVTeW5jTW9kZWxbZ3JvdXBJZF0gPSB2YWx1ZUFycmF5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3JTZXJ2aWNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlOiAoKSA9PiB0aGlzLmVkaXRvclNlcnZpY2UuY2xvc2UoKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZWRpdG9yU2VydmljZS5jb250ZW50VHlwZVBpY2tlcih0eXBlUGlja2VyT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ29udGVudFR5cGUodHlwZSwgZ3JvdXBJZCkge1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29udGVudFR5cGVTeW5jTW9kZWxbZ3JvdXBJZF0uZmluZEluZGV4KHggPT4geC5rZXkgPT09IHR5cGUua2V5KTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRUeXBlU3luY01vZGVsW2dyb3VwSWRdLnNwbGljZShpZHgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbnRlbnRUeXBlTGltaXQoKSB7XHJcbiAgICAgICAgY29uc3QgdHlwZVBpY2tlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIG11bHRpUGlja2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgZmlsdGVyQ3NzQ2xhc3M6IHRoaXMuX2ZpbHRlckNzc0NsYXNzLFxyXG4gICAgICAgICAgICBmaWx0ZXI6IGl0ZW0gPT4gdGhpcy5jb25maWcuY29udGVudFR5cGVDb3VudHMuc29tZSh4ID0+IHguaWQgPT0gaXRlbS5pZCksIC8vIGNvZXJjZSBzdHJpbmcgdG8gaW50ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzdWJtaXQ6IG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBJQ2xpcENvbnRlbnRUeXBlQ291bnRNb2RlbCA9IG1vZGVsLnNlbGVjdGlvblswXTtcclxuICAgICAgICAgICAgICAgIHZhbHVlLmNvdW50ID0gdGhpcy5jb25maWcuZXhpc3RpbmdJdGVtQ291bnRzID8gdGhpcy5jb25maWcuZXhpc3RpbmdJdGVtQ291bnRzW3ZhbHVlLmtleV0gOiAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dldENvbnRlbnRUeXBlSWNvbih2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuY29udGVudFR5cGVDb3VudHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclNlcnZpY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xvc2U6ICgpID0+IHRoaXMuZWRpdG9yU2VydmljZS5jbG9zZSgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5lZGl0b3JTZXJ2aWNlLmNvbnRlbnRUeXBlUGlja2VyKHR5cGVQaWNrZXJPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVDb250ZW50VHlwZUNvdW50KHR5cGUpIHtcclxuICAgICAgICBjb25zdCBpZHggPSB0aGlzLmNvbmZpZy5jb250ZW50VHlwZUNvdW50cy5maW5kSW5kZXgoeCA9PiB4LmlkID09PSB0eXBlLmlkKTtcclxuICAgICAgICB0aGlzLmNvbmZpZy5jb250ZW50VHlwZUNvdW50cy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlKCkge1xyXG4gICAgICAgIGxldCBjb25maWc6IElDbGlwQ29uZmlnTW9kZWwgPSB7XHJcbiAgICAgICAgICAgIGdyb3VwczogW10sXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlQ291bnRzOiB0aGlzLmNvbmZpZy5jb250ZW50VHlwZUNvdW50cyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNvbnRlbnRUeXBlU3luY01vZGVsKS5mb3JFYWNoKGsgPT4ge1xyXG4gICAgICAgICAgICBjb25maWcuZ3JvdXBzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogK2ssXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZUtleXM6IHRoaXMuY29udGVudFR5cGVTeW5jTW9kZWxbK2tdLm1hcCh4ID0+IHgua2V5KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5jbGlwU2VydmljZS5zYXZlKGNvbmZpZyk7ICAgICAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ2xpcFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNlcnZpY2VzTW9kdWxlID0gYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnY2xpcC5zZXJ2aWNlcycsIFtdKVxyXG4gICAgLmZhY3RvcnkoQ2xpcFNlcnZpY2Uuc2VydmljZU5hbWUsIENsaXBTZXJ2aWNlKVxyXG4gICAgLm5hbWU7IiwiZXhwb3J0IGNsYXNzIENsaXBTZXJ2aWNlIGltcGxlbWVudHMgSUNsaXBTZXJ2aWNlIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHNlcnZpY2VOYW1lID0gJ2NsaXBTZXJ2aWNlJztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRodHRwLCBwcml2YXRlIHVtYlJlcXVlc3RIZWxwZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZXF1ZXN0ID0gKG1ldGhvZDogJ1BPU1QnIHwgJ0dFVCcsIHVybDogc3RyaW5nLCBkYXRhPzogb2JqZWN0KSA9PiB7XHJcbiAgICAgICAgdXJsID0gYCR7VW1icmFjby5TeXMuU2VydmVyVmFyaWFibGVzLkNsaXAuY29uZmlndXJhdGlvbkFwaUJhc2VVcmx9JHt1cmx9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudW1iUmVxdWVzdEhlbHBlci5yZXNvdXJjZVByb21pc2UoXHJcbiAgICAgICAgICAgIG1ldGhvZCA9PT0gJ1BPU1QnID8gdGhpcy4kaHR0cC5wb3N0KHVybCwgZGF0YSlcclxuICAgICAgICAgICAgICAgIDogdGhpcy4kaHR0cC5nZXQodXJsKSxcclxuICAgICAgICAgICAgJ1NvbWV0aGluZyBicm9rZSdcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmUgPSAoY29uZmlnOiBJQ2xpcENvbmZpZ01vZGVsKSA9PiB0aGlzLl9yZXF1ZXN0KCdQT1NUJywgJ1NhdmUnLCBjb25maWcpO1xyXG5cclxuICAgIGdldCA9ICgpID0+IHRoaXMuX3JlcXVlc3QoJ0dFVCcsICdHZXQnKTtcclxufSJdfQ=="}